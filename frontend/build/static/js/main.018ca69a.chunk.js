(this.webpackJsonpgroup9=this.webpackJsonpgroup9||[]).push([[0],{105:function(e,t,n){},115:function(e,t,n){},143:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(36),o=n.n(s),i=(n(86),n(87),n(9)),r=n(23),l=n(4),u=n(22),j=n.n(u),b=(n(105),n(73)),d=(n(108),n(12)),O=new(n(80).a)({category:""}),h=(n(115),n(19)),p=n(74),m=n.n(p),x="chat",f=function(e,t){var n=Object(c.useState)([]),a=Object(l.a)(n,2),s=a[0],o=a[1],r=Object(c.useRef)();Object(c.useEffect)((function(){return r.current=m()("https://g9-messaging-service.herokuapp.com/",{forceNew:!0,reconnectionDelay:1e3,reconnection:!0,reconnectionAttempts:10,transports:["websocket"],agent:!1,upgrade:!1,rejectUnauthorized:!1,query:{roomId:e,username:t}}),r.current.on(x,(function(e){var t=Object(h.a)(Object(h.a)({},e),{},{ownedByCurrentUser:e.senderId===r.current.id});o((function(e){return[].concat(Object(i.a)(e),[t])}))})),function(){r.current.disconnect()}}),[e]);return{messages:s,sendMessage:function(e){try{r.current.emit(x,{body:e,senderId:r.current.id})}catch(t){alert(t)}}}},v=n(1),g=function(e){var t=e.room,n=e.username,s=f(t),o=s.messages,i=s.sendMessage,r=a.a.useState(""),u=Object(l.a)(r,2),j=u[0],b=u[1];console.log(t);return Object(c.useEffect)((function(){var e=document.getElementById("scroll-To-Top");e.scrollTop=e.scrollHeight-e.clientHeight})),Object(v.jsxs)("div",{className:"chat-room-container",children:[Object(v.jsxs)("h4",{className:"room-name",children:[""!==t?"Category: ".concat(t):null," "]}),Object(v.jsxs)("h4",{className:"combinedDiv",children:["Your username: ",n]}),Object(v.jsx)("div",{id:"scroll-To-Top",className:"messages-container",children:Object(v.jsx)("ol",{className:"messages-list",children:o.map((function(e,t){return Object(v.jsx)("li",{id:"",className:"message-item ".concat(e.ownedByCurrentUser?"my-message":"received-message"),children:e.body},t)}))})}),Object(v.jsxs)("div",{className:"combinedDiv",children:[Object(v.jsx)("textarea",{value:j,onChange:function(e){b(e.target.value)},placeholder:"Write message...",className:"new-message-input-field"}),Object(v.jsx)("button",{onClick:function(){0==!j.length&&(i(j),b(""))},className:"send-message-button",children:"Send"})]})]})},y=n(44),k=n.n(y);var N=function(){var e=Object(c.useState)([]),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),o=Object(l.a)(s,2),u=o[0],h=o[1],p="https://g9-content-service.herokuapp.com",m=Object(c.useState)(),x=Object(l.a)(m,2),f=x[0],y=x[1],N=Object(c.useState)(),C=Object(l.a)(N,2),T=C[0],w=C[1],S=Object(c.useState)(""),I=Object(l.a)(S,2),E=I[0],B=I[1],F=Object(c.useState)(""),L=Object(l.a)(F,2),U=L[0],A=L[1],H=Object(c.useState)(null),P=Object(l.a)(H,2),G=P[0],D=P[1],M=Object(c.useState)("Computers"),z=Object(l.a)(M,2),R=z[0],q=z[1],J=Object(c.useState)(0),W=Object(l.a)(J,2),K=W[0],Y=W[1],_=Object(c.useState)("less than a week"),V=Object(l.a)(_,2),Z=V[0],$=V[1],Q=Object(c.useState)(""),X=Object(l.a)(Q,2),ee=X[0],te=X[1],ne=Object(d.b)(),ce=ne.user,ae=ne.isAuthenticated,se=ne.isLoading,oe=O.useState((function(e){return e.category})),ie=function(){j()({method:"GET",url:"".concat(p,"/content/"),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&(a(e.data.reverse()),console.log(e.data))})).catch((function(e){console.log("getting an error ",e)}))};Object(c.useEffect)((function(){ie()}),[]),Object(c.useEffect)((function(){""===oe?ie():j()({method:"GET",url:"".concat(p,"/content/Category/").concat(oe),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&a(e.data.reverse())})).catch((function(e){console.log("getting an error ",e)}))}),[oe]),Object(c.useEffect)((function(){se||ae&&(y(ce.sub),w(ce.nickname))}),[ae]);var re=function(){return h(!1)},le=function(e){var t=null;return!se&&ae&&e&&(t=e.includes(f)?Object(v.jsx)("span",{className:"like-btn",children:"\u2764\ufe0f"}):Object(v.jsx)("span",{className:"like-btn",children:"\ud83e\udd0d"})),t};return Object(v.jsxs)("div",{style:{display:"flex",justifyItems:"center",flexFlow:"column",paddingTop:"80px"},children:[Object(v.jsx)(b.a,{visible:u,onClose:function(){return re()},animation:"rotate",width:900,height:910,children:Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:function(e){var t;re();var c=(t={userId:f,username:T,contentTitle:E,contentBody:U,rating:K,productLink:ee,lengthOfUse:Z},Object(r.a)(t,"lengthOfUse",Z),Object(r.a)(t,"contentCategory",R),t);null!==G&&""!==G&&(c.imageLink=G),j.a.post("".concat(p,"/content"),c,{headers:{"Content-Type":"application/json"}}).then((function(e){if(200===e.status){var t=n.unshift(e.data);a(t)}})).catch((function(e){console.log(e.response)}))},children:[Object(v.jsx)("input",{className:"post-input-field",value:E,onChange:function(e){return B(e.target.value)},placeholder:"Title",type:"text",name:"contentTitle",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("textarea",{value:U,className:"post-text-area",rows:"11",cols:"100",maxLength:"2000",onChange:function(e){return A(e.target.value)},placeholder:"Your new post goes here...",type:"text",name:"contentBody",required:!0}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{value:G,className:"post-input-field",onChange:function(e){return D(e.target.value)},placeholder:"Paste your image link here",type:"text",name:"imageLink"}),Object(v.jsx)("br",{}),Object(v.jsx)(k.a,{classNames:"rating-box",count:5,onChange:function(e){Y(e)},size:30,activeColor:"#eb4034",value:K,edit:!0,isHalf:!0}),Object(v.jsx)("br",{}),Object(v.jsxs)("select",{className:"post-input-field",onChange:function(e){$(e.target.value)},value:Z,children:[Object(v.jsx)("option",{value:"less than a week",children:"Less than a week"}),Object(v.jsx)("option",{value:"about a week",children:"About a week"}),Object(v.jsx)("option",{value:"about a month",children:"About a month"}),Object(v.jsx)("option",{value:"about 6 months",children:"About six months"}),Object(v.jsx)("option",{value:"about a year",children:"About a year"}),Object(v.jsx)("option",{value:"over 2 years",children:"Over 2 years"}),Object(v.jsx)("option",{value:"over 5 years",children:"Over 5 years"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{value:ee,className:"post-input-field",onChange:function(e){return te(e.target.value)},placeholder:"Pase the link to the product or service",type:"text",name:"productLink"}),Object(v.jsx)("br",{}),Object(v.jsxs)("select",{className:"post-input-field",onChange:function(e){q(e.target.value)},value:R,children:[Object(v.jsx)("option",{value:"Computers",children:"Computers"}),Object(v.jsx)("option",{value:"Electronics",children:"Electronics"}),Object(v.jsx)("option",{value:"Food",children:"Food"}),Object(v.jsx)("option",{value:"Music",children:"Music"}),Object(v.jsx)("option",{value:"Art",children:"Art"}),Object(v.jsx)("option",{value:"Film",children:"Film"}),Object(v.jsx)("option",{value:"Gaming",children:"Gaming"}),Object(v.jsx)("option",{value:"Travel",children:"Travel"}),Object(v.jsx)("option",{value:"Pets",children:"Pets"}),Object(v.jsx)("option",{value:"Fashion",children:"Fashion"}),Object(v.jsx)("option",{value:"Cars",children:"Cars"}),Object(v.jsx)("option",{value:"Sports",children:"Sports"}),Object(v.jsx)("option",{value:"Toys",children:"Toys"}),Object(v.jsx)("option",{value:"Home",children:"Home"})]}),Object(v.jsx)("br",{}),Object(v.jsx)("input",{className:"post-submit",type:"submit",value:"PUBLISH"})]})})}),Object(v.jsxs)("div",{className:"content-houser",children:[Object(v.jsx)("div",{className:"content-main",children:n.map((function(e,t){return Object(v.jsx)("div",{className:"container-border",children:Object(v.jsx)("div",{className:"content-container",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{children:e.contentTitle}),Object(v.jsx)("p",{children:e.contentBody}),Object(v.jsxs)("p",{children:["Been using for ",e.lengthOfUse]}),Object(v.jsx)("div",{className:"rating-container",children:Object(v.jsx)(k.a,{classNames:"rating-box",count:5,size:30,activeColor:"#ff2652",value:e.rating.$numberDecimal,edit:!1,isHalf:!0})}),Object(v.jsx)("span",{children:"by: "})," ",Object(v.jsx)("b",{children:e.username}),Object(v.jsx)("div",{className:"content-img-container",children:e.imageLink?Object(v.jsx)("img",{className:"content-img",src:e.imageLink,alt:"image"}):null}),Object(v.jsxs)("h2",{className:"like-wrapper",children:[" ",Object(v.jsx)("span",{onClick:function(){return function(e,t,n,c){if(ae&&!se){var s=c,o=0;c.includes(f)?(s=c.filter((function(e){return e!==f})),o=-1):(s=[].concat(Object(i.a)(c),[f]),o=1),j.a.patch("".concat(p,"/content/").concat(e),{likes:t+o,likedByUsers:s},{headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&(console.log("old",c),console.log("new",s),a((function(e){return[].concat(Object(i.a)(e),[e[n].likes+=o])})),a((function(e){return[].concat(Object(i.a)(e),[e[n].likedByUsers=s])})))})).catch((function(e){console.log(e.response)}))}}(e._id,e.likes,t,e.likedByUsers)},children:le(e.likedByUsers)})," ",e.likes]}),Object(v.jsx)("br",{}),Object(v.jsx)("a",{className:"prod-btn-holder",target:"_blank",href:e.productLink,children:Object(v.jsx)("div",{className:"product-link-btn",children:"\ud83d\uded2 Available Here"})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("p",{children:["Category: ",e.contentCategory]}),Object(v.jsx)("span",{className:"date-span",children:e.postDate})]})})})}))}),ae?Object(v.jsx)("div",{className:"new-post-btn",onClick:function(){return h(!0)},children:"\ud83d\udcdd CREATE NEW POST"}):null,Object(v.jsx)("div",{className:"content-chat",children:ae?Object(v.jsx)(g,{room:oe,username:T}):null})]})]})},C=function(){var e=Object(d.b)().loginWithRedirect;return Object(v.jsx)("button",{className:"btn btn-outline-info btn-block",onClick:function(){return e()},children:"Log In"})},T=function(){var e=Object(d.b)().logout;return Object(v.jsx)("button",{className:"btn btn-outline-danger btn-block",onClick:function(){return e({returnTo:window.location.origin})},children:"Log Out"})},w=function(){return Object(d.b)().isAuthenticated?Object(v.jsx)(T,{}):Object(v.jsx)(C,{})},S=(n(143),n(75));var I=function(){var e=Object(d.b)(),t=e.user,n=e.isAuthenticated,a=e.isLoading,s=Object(c.useState)(""),o=Object(l.a)(s,2),i=(o[0],o[1]),r=Object(c.useState)(""),u=Object(l.a)(r,2),b=u[0],O=u[1],h=Object(c.useState)(""),p=Object(l.a)(h,2),m=p[0],x=p[1],f=Object(c.useState)(""),g=Object(l.a)(f,2),y=g[0],k=g[1],N=Object(c.useState)(!1),C=Object(l.a)(N,2),T=C[0],w=(C[1],Object(c.useState)("Tell us a bit about yourself...")),I=Object(l.a)(w,2),E=I[0],B=I[1],F="https://g9-profile-service.herokuapp.com";Object(c.useEffect)((function(){a||n&&t&&(console.log(t),i(t.sub),O(t.nickname),x(t.picture),k(t.name),L())}),[n]);var L=function(){j()({method:"GET",url:"".concat(F,"/profile/").concat(t.sub),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&B(e.data.userBio)})).catch((function(e){console.log("No bio was found, default bio will be used")}))},U=function(e){n&&!a&&j.a.put("".concat(F,"/profile/").concat(t.sub),{userId:t.sub,userBio:e},{headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&console.log(" bio saved as: ",e.data)})).catch((function(e){console.log(e.response)}))};return Object(v.jsx)("div",{style:{paddingTop:"60px"},className:"profile-wrapper",children:Object(v.jsx)("div",{className:"profile-container",children:n?Object(v.jsx)("div",{className:"profile-core-container",children:Object(v.jsxs)("div",{className:"profile-card",children:[Object(v.jsx)("div",{className:"card-li",children:Object(v.jsx)("div",{className:"profile-pic-border",children:Object(v.jsx)("img",{src:m,className:"profile-pic",alt:"profile picture"})})}),Object(v.jsx)("div",{className:"card-li",children:Object(v.jsx)("div",{className:"profile-info-container",children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("h1",{children:[" ",b," "]}),Object(v.jsxs)("h2",{children:[" ",y," "]}),Object(v.jsx)("div",{className:"prof-edit-text",children:Object(v.jsx)(S.a,{value:E,type:"text",onSave:function(e){U(e),B(e)},editing:T})})]})})})]})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"profile-logout-container",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("h4",{children:"Oops looks like you are not signed in..."}),Object(v.jsx)("h4",{children:"Please sing in to view your profile information"})]})})})})})},E=function(){return Object(v.jsx)("div",{className:"navbar-nav",children:Object(v.jsx)(w,{})})},B=n(21),F=n(155),L=(n(72),function(){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"navbar-nav mr-auto",children:[Object(v.jsx)(B.b,{to:"/",exact:!0,className:"nav-link nav-text ml-auto",activeClassName:"router-link-exact-active",onClick:function(){return O.update((function(e){e.category=""}))},children:" Home"}),Object(v.jsxs)(F.a,{title:"Category",id:"collasible-nav-dropdown",children:[Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Computers"}))},children:"Computers"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Electronics"}))},children:"Electronics"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Food"}))},children:"Food"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Music"}))},children:"Music"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Film"}))},children:"Film"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Gaming"}))},children:"Gaming"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Travel"}))},children:"Travel"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Pets"}))},children:"Pets"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Fashion"}))},children:"Fashion"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Cars"}))},children:"Cars"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Sports"}))},children:"Sports"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Toys"}))},children:"Toys"}),Object(v.jsx)(F.a.Item,{onClick:function(){return O.update((function(e){e.category="Home"}))},children:"Home"})]})]}),Object(v.jsx)("div",{className:"navbar-nav ml-auto",children:Object(v.jsx)(B.b,{to:"/profile",exact:!0,className:"nav-link nav-text ",activeClassName:"router-link-exact-active",children:"\ud83d\udc64"})})]})}),U=function(){return Object(v.jsx)("div",{className:"nav-container mb-3",children:Object(v.jsx)("nav",{className:"navbar navbar-expand-md navbar-light",children:Object(v.jsxs)("div",{className:"container-fluid",children:[Object(v.jsx)("div",{className:"navbar-brand logo"}),Object(v.jsx)(L,{}),Object(v.jsx)(E,{})]})})})},A=n(5);var H=function(){return Object(v.jsx)(B.a,{children:Object(v.jsxs)("div",{className:"App",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)(U,{}),Object(v.jsx)("hr",{className:"nav-line"})]}),Object(v.jsxs)(A.c,{children:[Object(v.jsx)(A.a,{path:"/profile",children:Object(v.jsx)(I,{})}),Object(v.jsx)(A.a,{path:"/",children:Object(v.jsx)(N,{})})]})]})})},P=function(e){var t=e.children,n=Object(A.f)();return Object(v.jsx)(d.a,{domain:"com3014group9.eu.auth0.com",clientId:"brIU6KrDBZjtVli3f4J2bUCTmoxFKIz5",redirectUri:window.location.origin,onRedirectCallback:function(e){n.push((null===e||void 0===e?void 0:e.returnTo)||window.location.pathname)},children:t})};n(150);o.a.render(Object(v.jsx)(B.a,{children:Object(v.jsx)(P,{children:Object(v.jsx)(H,{})})}),document.getElementById("root"))},72:function(e,t,n){},86:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.018ca69a.chunk.js.map